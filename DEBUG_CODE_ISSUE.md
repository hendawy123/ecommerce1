# تشخيص مشكلة "الكود غلط"

## المشكلة
عند إدخال الكود من الجيميل، يظهر رسالة "غلط" حتى لو كان الكود صحيح.

## الحلول المطبقة

### 1. تشخيص شامل
- ✅ عرض الكود المدخل بالتفصيل
- ✅ عرض طول الكود ونوعه
- ✅ عرض الاستجابة الكاملة من API
- ✅ التحقق من جميع الحالات المحتملة للنجاح

### 2. أزرار تشخيص
- ✅ زر "Debug Info" لعرض معلومات النموذج
- ✅ زر "Test API Directly" لاختبار API مباشرة
- ✅ عرض الاستجابة في toast message

## خطوات التشخيص

### الخطوة 1: افتح Developer Tools
1. اضغط F12 في المتصفح
2. اذهب إلى تبويب Console

### الخطوة 2: أدخل الكود
1. أدخل الكود من الجيميل
2. اضغط "Verify Code"
3. ابحث في Console عن:
```
=== CODE VERIFICATION DEBUG ===
Code entered: 123456
Code length: 6
Code type: string
Full API response: {...}
Is success? false
```

### الخطوة 3: استخدم أزرار التشخيص
1. اضغط "Debug Info (Check Console)" لعرض معلومات النموذج
2. اضغط "Test API Directly" لاختبار API مباشرة
3. راقب Console والـ toast messages

### الخطوة 4: حل المشكلة
بناءً على الاستجابة:

#### إذا كانت الاستجابة تحتوي على "success":
- المشكلة في منطق التحقق
- سيتم إصلاحها تلقائياً

#### إذا كانت الاستجابة تحتوي على "error":
- الكود غير صحيح أو منتهي الصلاحية
- اطلب كود جديد

#### إذا كانت الاستجابة فارغة:
- مشكلة في API
- تحقق من الاتصال بالإنترنت

## أمثلة على الاستجابات

### نجاح:
```json
{
  "status": "success",
  "message": "Code verified successfully"
}
```

### فشل:
```json
{
  "status": "error",
  "message": "Invalid reset code"
}
```

### انتهاء صلاحية:
```json
{
  "status": "error",
  "message": "Reset code expired"
}
```

## نصائح إضافية

1. **تأكد من الكود:**
   - انسخ الكود بدقة من الجيميل
   - لا تضع مسافات إضافية
   - تأكد من أن الكود 6 أرقام

2. **جرب كود جديد:**
   - اضغط "Request New Code"
   - انتظر الكود الجديد
   - أدخل الكود فوراً

3. **تحقق من البريد الإلكتروني:**
   - تأكد من أن الكود وصل
   - تحقق من مجلد Spam
   - استخدم أحدث كود وصل

## إذا استمرت المشكلة
شارك معي:
1. رسالة الخطأ من Console
2. الاستجابة الكاملة من API
3. الكود الذي أدخلته
