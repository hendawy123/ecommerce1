# تشخيص مشكلة "Failed to reset password"

## المشكلة
عند إدخال كلمة المرور الجديدة والتأكيد، يظهر "Failed to reset password please try again".

## الحلول المطبقة

### 1. تشخيص شامل
- ✅ عرض البريد الإلكتروني وكلمة المرور
- ✅ عرض الاستجابة الكاملة من API
- ✅ التحقق من جميع الحالات المحتملة للنجاح
- ✅ عرض رسائل خطأ مفصلة

### 2. أزرار تشخيص
- ✅ زر "Debug Info" لعرض معلومات النموذج
- ✅ زر "Test Reset API Directly" لاختبار API مباشرة
- ✅ عرض الاستجابة في toast message

### 3. معلومات مساعدة
- ✅ نصائح لكلمة المرور
- ✅ متطلبات كلمة المرور
- ✅ إرشادات التشخيص

## خطوات التشخيص

### الخطوة 1: افتح Developer Tools
1. اضغط F12 في المتصفح
2. اذهب إلى تبويب Console

### الخطوة 2: أدخل كلمة المرور
1. أدخل كلمة المرور الجديدة
2. أدخل تأكيد كلمة المرور
3. اضغط "Reset Password"
4. ابحث في Console عن:
```
=== RESET PASSWORD DEBUG ===
Email: user@example.com
New password: NewPass123
Confirm password: NewPass123
Full reset password response: {...}
Is reset success? false
```

### الخطوة 3: استخدم أزرار التشخيص
1. اضغط "Debug Info (Check Console)" لعرض معلومات النموذج
2. اضغط "Test Reset API Directly" لاختبار API مباشرة
3. راقب Console والـ toast messages

### الخطوة 4: حل المشكلة
بناءً على الاستجابة:

#### إذا كانت الاستجابة تحتوي على "success":
- المشكلة في منطق التحقق
- سيتم إصلاحها تلقائياً

#### إذا كانت الاستجابة تحتوي على "error":
- مشكلة في كلمة المرور أو البريد الإلكتروني
- تحقق من متطلبات كلمة المرور

#### إذا كانت الاستجابة فارغة:
- مشكلة في API
- تحقق من الاتصال بالإنترنت

## متطلبات كلمة المرور

### الحد الأدنى:
- ✅ 6 أحرف على الأقل
- ✅ حرف كبير واحد على الأقل (A-Z)
- ✅ حرف صغير واحد على الأقل (a-z)
- ✅ رقم واحد على الأقل (0-9)

### مثال لكلمة مرور صحيحة:
- `NewPass123`
- `MyPassword1`
- `SecurePass2024`

## الأسباب المحتملة

### 1. كلمة المرور لا تفي بالمتطلبات
- **الحل:** استخدم كلمة مرور أقوى

### 2. كلمة المرور والتأكيد غير متطابقين
- **الحل:** تأكد من تطابق كلمة المرور

### 3. البريد الإلكتروني غير صحيح
- **الحل:** تحقق من البريد الإلكتروني في URL

### 4. مشكلة في API
- **الحل:** تحقق من Console للأخطاء

### 5. انتهاء صلاحية الكود
- **الحل:** ابدأ العملية من جديد

## أمثلة على الاستجابات

### نجاح:
```json
{
  "status": "success",
  "message": "Password reset successfully"
}
```

### فشل:
```json
{
  "status": "error",
  "message": "Password does not meet requirements"
}
```

### خطأ HTTP:
```json
{
  "status": 400,
  "message": "Invalid email or expired code"
}
```

## نصائح إضافية

1. **تأكد من كلمة المرور:**
   - استخدم كلمة مرور قوية
   - تأكد من تطابق كلمة المرور والتأكيد
   - لا تستخدم كلمة مرور قديمة

2. **تحقق من البريد الإلكتروني:**
   - تأكد من أن البريد الإلكتروني صحيح
   - تأكد من أن الكود لم ينته صلاحيته

3. **جرب مرة أخرى:**
   - إذا فشلت، جرب كلمة مرور مختلفة
   - تأكد من اتصال الإنترنت

## إذا استمرت المشكلة
شارك معي:
1. رسالة الخطأ من Console
2. الاستجابة الكاملة من API
3. كلمة المرور التي استخدمتها (بدون كشفها)
4. البريد الإلكتروني المستخدم
