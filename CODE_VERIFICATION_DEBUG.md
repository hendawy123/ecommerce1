# تشخيص مشكلة التحقق من الكود

## المشكلة
الكود يصل على الجيميل لكن عند إدخاله يقول "غلط".

## الحلول المطبقة

### 1. إضافة تشخيص شامل
- ✅ console.log للكود المرسل
- ✅ console.log لاستجابة الـ API
- ✅ console.log لحالة HTTP response
- ✅ console.log لـ headers

### 2. تحسين معالجة الأخطاء
- ✅ عرض رسالة الخطأ الدقيقة
- ✅ التحقق من عدة حالات للنجاح
- ✅ معالجة أفضل للأخطاء

### 3. إضافة معلومات مساعدة
- ✅ نصائح للمستخدم
- ✅ زر لطلب كود جديد
- ✅ روابط للعودة

## كيفية التشخيص

### 1. افتح Developer Tools
- اضغط F12 في المتصفح
- اذهب إلى تبويب Console

### 2. أدخل الكود وابحث عن:
```
Verifying code: 123456
Sending verify request with code: 123456
Response status: 200
Verify code response: {status: "success", message: "..."}
```

### 3. إذا كان هناك خطأ، ابحث عن:
```
Code verification failed: Invalid reset code
HTTP error response: {"message": "Invalid reset code"}
```

## الأسباب المحتملة

### 1. الكود منتهي الصلاحية
- الكود صالح لفترة محدودة
- **الحل:** اطلب كود جديد

### 2. الكود غير صحيح
- تأكد من نسخ الكود بدقة
- لا تضع مسافات إضافية
- **الحل:** انسخ الكود مرة أخرى

### 3. مشكلة في الـ API
- الخادم لا يقبل الكود
- **الحل:** تحقق من Console للأخطاء

### 4. الكود مستخدم من قبل
- بعض الكودات تستخدم مرة واحدة فقط
- **الحل:** اطلب كود جديد

## خطوات الحل

### الخطوة 1: تحقق من Console
1. افتح F12
2. اذهب إلى Console
3. أدخل الكود
4. ابحث عن رسائل الخطأ

### الخطوة 2: جرب كود جديد
1. اضغط "Request New Code"
2. انتظر الكود الجديد
3. أدخل الكود الجديد فوراً

### الخطوة 3: تحقق من البريد الإلكتروني
1. تأكد من أن الكود صحيح
2. لا تضع مسافات إضافية
3. انسخ الكود بدقة

### الخطوة 4: إذا استمر الخطأ
شارك رسالة الخطأ من Console معي

## أمثلة على الاستجابات

### نجاح:
```javascript
{
  status: "success",
  message: "Code verified successfully"
}
```

### فشل:
```javascript
{
  status: "error",
  message: "Invalid reset code"
}
```

### خطأ HTTP:
```javascript
{
  status: 400,
  message: "Reset code expired"
}
```
